<!DOCTYPE html>
<html>
  <head>
    <title>GC & Open AI Integration</title>
    <script src="https://sdk-cdn.mypurecloud.com/javascript/159.0.0/purecloud-platform-client-v2.min.js"></script>
    <script src="https://sdk-cdn.mypurecloud.com/client-apps/2.6.3/purecloud-client-app-sdk-de77761d.min.js"></script>
    <script src="./fineTune.js"></script>
    <script src="./listFineTunes.js"></script>
    <script src="./extract_text.js"></script>
    <script src="./handleFileSelect.js"></script>
    <script src="./uploadJSONL.js"></script>
    <link rel="stylesheet" href="app.css" />
  </head>
  <body>
    <h1>GC & Open AI Integration</h1>
    <form>
      <div>
        <label for="API_KEY">Open AI API Key:</label>
        <input type="password" id="API_KEY" name="API_KEY" required />
      </div>
      <div>
        <label for="json-file">Select a JSON file:</label>
        <input type="file" id="json-file" name="json-file" accept=".json" />
      </div>
      <div>
        <label for="jsonl-preview">Preview the first 50 lines of the generated JSONL:</label>
        <textarea id="jsonl-preview" rows="10" readonly></textarea>
      </div>
      <div>
        <button id="upload-button" type="button">Upload JSONL</button>
      </div>
      <div>
        <label for="upload-result">Upload Result:</label>
        <textarea id="upload-result" rows="10" readonly></textarea>
      </div>
      <div>
        <label for="training-file">File Id for fine tuning:</label>
        <input type="text" id="training-file" name="training-file"/>
      </div>
    <div>
      <label for="model">Model:</label>
      <input type="text" id="model" name="model"/>
    </div>      
      <div>
        <button id="fine-tune-button" type="button">Fine-tune</button>
  		</div>
      <div>
        <label for="fine-tune-result">Fine-tune Result:</label>
        <textarea id="fine-tune-result" rows="10" readonly></textarea>
      </div>
      
      <button id="list-button" type="button">List Fine-tunes</button>
      <div>
        <table id="fine-tunes-table">
          <thead>
            <tr>
              <th>Id</th>
              <th>Fine tuned model</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </form>

    <script>

       // CÃ³digo para llamar a la API de GC mediante SDK
       const platformClient = require('platformClient');

      const form = document.querySelector('form');
      form.addEventListener("change", function (event) {
        handleFileSelect(event);
      });
    
      const uploadButton = document.getElementById("upload-button");
      uploadButton.addEventListener("click", function () {
        const preview = document.getElementById("jsonl-preview");
        const jsonl = preview.value;
        uploadJSONL(jsonl);
      });
    
      const fineTuneButton = document.getElementById("fine-tune-button");
      fineTuneButton.addEventListener("click", function () {
        fineTune();
      });


      const listButton = document.getElementById("list-button");
      listButton.addEventListener("click", function () {
        listFineTunes();
      });

    </script>
    
  </body>
</html>
